<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="keywords" content="ROS,rosbag">
<title>rosbag のメモ | ざきのメモ</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/png" href="favicon.png">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6967324061031661",
    enable_page_level_ads: true
  });
</script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=desert"></script>
<script type="text/javascript" src="vimlike.js"></script>
</head>
<body>
<div class="wrap">

<header>
<h1><a href="index.html">ざきのメモ</a></h1>
</header>

<div class="main">
<article>
<h4>2018/02/14</h4>
<h1>rosbag のメモ</h1>

<p>このページでは rosbag の自分がよく使うコマンドをまとめています。</p>
 
<h2>環境</h2>
<ul>
<li>Ubuntu 16.04</li>
<li>Kinetic</li>
</ul>

<h2>記録</h2>
<p>指定したトピックを記録</p>
<pre class="prettyprint"><code>$ rosbag record -O &lt;your bagfile name&gt; &lt;target topic&gt;</code></pre>
<p>実用例</p>
<pre class="prettyprint"><code>$ rosbag record -O bagfile /odom /scan /cmd_vel /tf</code></pre>

<h2>再生</h2>
<p>最初から最後まで再生</p>
<pre class="prettyprint"><code>$ rosbag play &lt;your bagfile&gt;</code></pre>
<p>実用例</p>
<pre class="prettyprint"><code>$ rosbag play bagfile.bag</code></pre>
<p>最初から60秒間再生</p>
<pre class="prettyprint"><code>$ rosbag play -u 60 &lt;your bagfile&gt;</code></pre>
<p>開始60秒後から再生</p>
<pre class="prettyprint"><code>$ rosbag play -s 60 &lt;your bagfile&gt;</code></pre>

<h2>編集</h2>
<p>指定した時間まで切り取り出力</p>
<pre class="prettyprint"><code>$ rosbag filter input.bag output.bug "t.secs &lt; &lt;UNIX time&gt;"</code></pre>
<p>実用例</p>
<pre class="prettyprint"><code>$ rosbag filter bagfile.bag bagfile_before60sec.bag "t.secs &lt; 1518574082.00"</code></pre>
<p>不等号を書き換えれば他の範囲を指定することもできます。<br>
また、ここで使う UNIX time は以下のように確認できます。</p>
<pre class="prettyprint"><code>$ rosbag info bagfile.bag</code></pre>
<p>例えば、開始してから60秒後の時間は、start欄に書いている UNIX time に60を足した数字などと計算して確認することができます。</p>

<h2>参考</h2>
<ul>
<li><a href="https://answers.ros.org/question/99711/how-to-split-a-recorded-rosbag-file/">How to split a recorded rosbag file ? - ROS Answers: Open Source Q&amp;A Forum</a></li>
</ul>

<!-- BannerAd -->
<div class="ad" align="center">
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-6967324061031661" data-ad-slot="5584717331"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
<!-- ad --></div>

<ul>
<li><a href="index.html">トップへもどる</a></li>
</ul>
</article>

<footer>
<small>Copyright &copy; 2017-2018 Ryo Okazaki, all rights reserved.</small>
</footer>
<!-- main --></div>
<!-- wrap --></div>

</body>
</html>
